# JavaScript 模組化結構說明

## 概述
原本的 `tool.js` 檔案已經被分解為多個功能模組，以提高程式碼的可維護性和可讀性。

## 檔案結構

### 1. `main.js` - 主要初始化和核心功能
- 側邊欄導航功能
- 分頁切換
- 通知系統
- 檔案上傳拖拽功能
- 表單驗證
- 自動保存功能
- 響應式側邊欄切換
- 鍵盤快捷鍵

### 2. `auth.js` - 帳號認證和帳號管理
- 帳號登入處理
- 載入帳號狀態
- 更新帳號列表表格
- 檢查並隱藏已登入的平台選項
- 刪除帳號
- 獲取平台顯示名稱

### 3. `communities.js` - 社團管理功能
- 載入社團列表
- 重新整理社團列表
- 獲取 Facebook 社團列表
- 顯示社團列表
- 從資料庫載入已儲存的 Facebook 社團
- 社團選擇功能（全選、取消全選等）

### 4. `templates.js` - 文案模板管理
- 載入文案模板
- 載入貼文模板列表
- 更新標籤篩選器選項
- 根據標籤篩選模板
- 處理標籤篩選器變更
- 更新文案模板選項
- 處理文案模板選擇變更
- 通用函數：清理文字並在第一個字元前加上換行符號

### 5. `posting.js` - 發文設定功能
- 多步驟發文處理
- 步驟切換和驗證
- 收集步驟數據
- 填充確認摘要
- 準備發文數據
- 執行立即發文
- 保存排程發文設定
- 確認發布
- 重置到步驟1

### 6. `utils.js` - 通用工具函數
- 處理文案保存
- 處理圖片上傳
- 移除圖片預覽
- 更新發文平台選項
- 處理發文平台選擇變更
- 檢查表單是否為空並更新按鈕狀態
- 為表單輸入框添加事件監聽器

### 7. `init.js` - 爬蟲工具初始化
- 爬蟲工具功能初始化
- 即時更新文案預覽
- 綁定事件監聽器

### 8. `tool.js` - 主要模組載入器
- 檢查所有必要模組是否已載入
- 等待所有模組載入完成後初始化

## 載入順序
在 HTML 中的載入順序很重要，必須按照以下順序：

1. `main.js` - 核心功能
2. `auth.js` - 認證功能
3. `communities.js` - 社團管理
4. `templates.js` - 模板管理
5. `posting.js` - 發文設定
6. `utils.js` - 通用工具
7. `init.js` - 初始化
8. `tool.js` - 模組載入器

## 依賴關係
- `main.js` 不依賴其他模組
- `auth.js` 依賴 `main.js` 的通知系統
- `communities.js` 依賴 `auth.js` 的平台名稱函數
- `templates.js` 不依賴其他模組
- `posting.js` 依賴 `templates.js` 的內容處理函數
- `utils.js` 依賴多個模組的函數
- `init.js` 依賴所有其他模組
- `tool.js` 依賴所有模組

## 優點
1. **可維護性**：每個檔案專注於特定功能，更容易理解和修改
2. **團隊協作**：不同開發者可以同時處理不同功能模組
3. **程式碼重用**：可以將通用功能抽取到獨立的模組中
4. **除錯和測試**：問題更容易定位到特定檔案
5. **效能優化**：可以按需載入JavaScript檔案

## 注意事項
1. 確保所有模組都正確載入後再初始化
2. 函數之間的依賴關係要清楚
3. 全域變數和函數要正確導出
4. 事件監聽器要避免重複綁定

## 未來改進
1. 使用 ES6 模組系統
2. 實作按需載入
3. 添加模組熱重載
4. 實作程式碼分割
5. 添加單元測試
