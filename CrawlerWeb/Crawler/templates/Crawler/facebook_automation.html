{% load static %}
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Facebook 自動化工具 - 智能自動化平台</title>
	<link rel="stylesheet" href="{% static 'Crawler/css/facebook_automation.css' %}">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
	<!-- 導航欄 -->
	<nav class="navbar">
		<div class="nav-container">
			<div class="nav-brand">
				<i class="fas fa-robot"></i>
				<span>Facebook 自動化工具</span>
			</div>
			<div class="nav-menu">
				<a href="/" class="nav-link"><i class="fas fa-home"></i> 首頁</a>
				<a href="{% url 'crawler_tool' %}" class="nav-link"><i class="fas fa-tools"></i> 爬蟲工具</a>
				{% if user.is_authenticated %}
					<a href="{% url 'Accounts:profile' %}" class="nav-link"><i class="fas fa-user"></i> {{ user.username }}</a>
					{% if user.is_superuser %}
					<a href="/admin/" class="nav-link"><i class="fas fa-cog"></i> 管理</a>
					{% endif %}
					<a href="{% url 'Accounts:logout' %}" class="nav-link"><i class="fas fa-sign-out-alt"></i> 登出</a>
				{% else %}
					<a href="{% url 'Accounts:login' %}" class="nav-link"><i class="fas fa-sign-in-alt"></i> 登入</a>
				{% endif %}
			</div>
		</div>
	</nav>

	<!-- 主要內容區域 -->
	<div class="main-container">
		<!-- 側邊欄 -->
		<aside class="sidebar">
			<div class="sidebar-header">
				<h3><i class="fas fa-facebook"></i> Facebook 功能</h3>
			</div>
			<nav class="sidebar-nav">
				<button class="sidebar-item active" data-tab="login">
					<i class="fas fa-sign-in-alt"></i>
					<span>帳號登入</span>
				</button>
				<button class="sidebar-item" data-tab="communities">
					<i class="fas fa-users"></i>
					<span>我的社團</span>
				</button>
				<button class="sidebar-item" data-tab="posting">
					<i class="fas fa-edit"></i>
					<span>自動發文</span>
				</button>
				<button class="sidebar-item" data-tab="status">
					<i class="fas fa-info-circle"></i>
					<span>狀態檢查</span>
				</button>
			</nav>
		</aside>

		<!-- 內容區域 -->
		<main class="content">
			<!-- 帳號登入 -->
			<div class="tab-content active" id="tab-login">
				<div class="content-header">
					<h2><i class="fas fa-sign-in-alt"></i> Facebook 帳號登入</h2>
					<p>輸入您的 Facebook 帳號資訊，系統將自動登入並保存 Cookie</p>
				</div>
				<div class="card">
					<div class="card-body">
						<form id="loginForm" class="form-grid">
							<div class="form-row">
								<label><i class="fas fa-envelope"></i> Facebook 電子郵件</label>
								<input type="email" name="email" placeholder="輸入您的 Facebook 電子郵件" required>
							</div>
							<div class="form-row">
								<label><i class="fas fa-lock"></i> Facebook 密碼</label>
								<input type="password" name="password" placeholder="輸入您的 Facebook 密碼" required>
							</div>
							<div class="form-actions">
								<button type="submit" class="btn btn-primary" id="loginBtn">
									<i class="fas fa-sign-in-alt"></i> 登入並保存 Cookie
								</button>
							</div>
						</form>
						<div id="loginStatus" class="status-message" style="display: none;"></div>
					</div>
				</div>
			</div>

			<!-- 我的社團 -->
			<div class="tab-content" id="tab-communities">
				<div class="content-header">
					<h2><i class="fas fa-users"></i> 我的 Facebook 社團</h2>
					<p>獲取您加入的所有 Facebook 社團列表</p>
				</div>
				<div class="card">
					<div class="card-body">
						<div class="action-bar">
							<button class="btn btn-primary" id="getCommunitiesBtn">
								<i class="fas fa-sync"></i> 獲取社團列表
							</button>
							<span class="status-text" id="communitiesStatus"></span>
						</div>
						<div id="communitiesList" class="communities-list"></div>
					</div>
				</div>
			</div>

			<!-- 自動發文 -->
			<div class="tab-content" id="tab-posting">
				<div class="content-header">
					<h2><i class="fas fa-edit"></i> 自動發文</h2>
					<p>選擇社團並自動發佈內容</p>
				</div>
				<div class="card">
					<div class="card-body">
						<form id="postingForm" class="form-grid">
							<div class="form-row">
								<label><i class="fas fa-users"></i> 選擇社團</label>
								<select name="community_url" id="communitySelect" required>
									<option value="">請先獲取社團列表</option>
								</select>
							</div>
							<div class="form-row">
								<label><i class="fas fa-edit"></i> 發文內容</label>
								<textarea name="message" rows="6" placeholder="輸入您要發佈的內容..." required></textarea>
							</div>
							<div class="form-actions">
								<button type="submit" class="btn btn-success" id="postBtn">
									<i class="fas fa-paper-plane"></i> 發佈到社團
								</button>
							</div>
						</form>
						<div id="postingStatus" class="status-message" style="display: none;"></div>
					</div>
				</div>
			</div>

			<!-- 狀態檢查 -->
			<div class="tab-content" id="tab-status">
				<div class="content-header">
					<h2><i class="fas fa-info-circle"></i> 狀態檢查</h2>
					<p>檢查您的 Facebook 自動化工具狀態</p>
				</div>
				<div class="card">
					<div class="card-body">
						<div class="status-grid">
							<div class="status-item">
								<div class="status-icon">
									<i class="fas fa-cookie-bite"></i>
								</div>
								<div class="status-info">
									<h4>Cookie 狀態</h4>
									<p id="cookieStatus">檢查中...</p>
								</div>
							</div>
							<div class="status-item">
								<div class="status-icon">
									<i class="fas fa-users"></i>
								</div>
								<div class="status-info">
									<h4>社團數量</h4>
									<p id="communitiesCount">未知</p>
								</div>
							</div>
							<div class="status-item">
								<div class="status-icon">
									<i class="fas fa-clock"></i>
								</div>
								<div class="status-info">
									<h4>最後更新</h4>
									<p id="lastUpdate">未知</p>
								</div>
							</div>
						</div>
						<button class="btn btn-info" id="refreshStatusBtn">
							<i class="fas fa-sync"></i> 重新檢查狀態
						</button>
					</div>
				</div>
			</div>
		</main>
	</div>

	<!-- 通知區域 -->
	<div id="notifications" class="notifications"></div>

	<!-- JavaScript -->
	<script src="{% static 'Crawler/js/facebook_automation.js' %}"></script>
</body>
</html>
